import{j as h}from"./records-3dk5nlg0.js";import{_ as f,c as o,a as t,F as g,C as y,E as b,n as a,m as k,d as u,B as l}from"./index-DZXbCyXS.js";const P={data(){return{buttons:[{key:"points",label:"積分紀錄"},{key:"purchases",label:"購買紀錄"},{key:"donations",label:"捐款紀錄"}],currentTab:"points",records:[],sortKey:"",sortOrder:1,currentPage:1,pageSize:15}},computed:{filteredRecords(){return this.sortKey?[...this.records].sort((n,e)=>n[this.sortKey]<e[this.sortKey]?-1*this.sortOrder:n[this.sortKey]>e[this.sortKey]?1*this.sortOrder:0):this.records},paginatedRecords(){const n=(this.currentPage-1)*this.pageSize;return this.filteredRecords.slice(n,n+this.pageSize)},totalPages(){return Math.ceil(this.filteredRecords.length/this.pageSize)}},methods:{switchTab(n){this.currentTab=n,this.currentPage=1,this.loadRecords()},sortBy(n){this.sortKey===n?this.sortOrder*=-1:(this.sortKey=n,this.sortOrder=1)},getSortIcon(n){return this.sortKey===n?this.sortOrder===1?"fa-solid fa-sort-up":"fa-solid fa-sort-down":"fa-solid fa-sort"},changePage(n){n>=1&&n<=this.totalPages&&(this.currentPage=n)},loadRecords(){this.records=this.currentTab==="points"?h.points:this.currentTab==="purchases"?h.purchases:h.donations}},mounted(){this.loadRecords()}},m={class:"web-record-points-container"},v={class:"record-buttons"},p=["onClick"],C={key:0,class:"record-table"},R={key:1,class:"record-table"},S={key:2,class:"record-table"},T={class:"pagination"},B=["disabled"],c=["onClick"],K=["disabled"];function O(n,e,I,w,i,s){return u(),o("div",m,[t("div",v,[(u(!0),o(g,null,y(i.buttons,(r,d)=>(u(),o("button",{key:d,onClick:x=>s.switchTab(r.key),class:a({active:i.currentTab===r.key})},[b(l(r.label)+" ",1),e[7]||(e[7]=t("span",{class:"arrow"},null,-1))],10,p))),128))]),i.currentTab==="points"?(u(),o("div",C,[t("table",null,[t("thead",null,[t("tr",null,[t("th",{onClick:e[0]||(e[0]=r=>s.sortBy("date"))},[e[8]||(e[8]=b(" 日期 ")),t("i",{class:a(s.getSortIcon("date"))},null,2)]),t("th",{onClick:e[1]||(e[1]=r=>s.sortBy("carbon"))},[e[9]||(e[9]=b(" 減少碳排量 ")),t("i",{class:a(s.getSortIcon("carbon"))},null,2)]),t("th",{onClick:e[2]||(e[2]=r=>s.sortBy("transport"))},[e[10]||(e[10]=b(" 交通工具名稱 ")),t("i",{class:a(s.getSortIcon("transport"))},null,2)]),e[11]||(e[11]=t("th",null,"開始點位",-1)),e[12]||(e[12]=t("th",null,"結束點位",-1)),e[13]||(e[13]=t("th",null,"經驗值",-1))])]),t("tbody",null,[(u(!0),o(g,null,y(s.paginatedRecords,(r,d)=>(u(),o("tr",{key:d},[t("td",null,l(r.date),1),t("td",null,l(r.carbon)+" CO₂",1),t("td",null,l(r.transport),1),t("td",null,l(r.start),1),t("td",null,l(r.end),1),t("td",null,l(r.experience),1)]))),128))])])])):k("",!0),i.currentTab==="purchases"?(u(),o("div",R,[t("table",null,[t("thead",null,[t("tr",null,[t("th",{onClick:e[3]||(e[3]=r=>s.sortBy("date"))},[e[14]||(e[14]=b(" 日期 ")),t("i",{class:a(s.getSortIcon("date"))},null,2)]),e[15]||(e[15]=t("th",null,"商品名稱",-1)),e[16]||(e[16]=t("th",null,"點數積分",-1)),e[17]||(e[17]=t("th",null,"來源",-1))])]),t("tbody",null,[(u(!0),o(g,null,y(s.paginatedRecords,(r,d)=>(u(),o("tr",{key:d},[t("td",null,l(r.date),1),t("td",null,l(r.product),1),t("td",null,l(r.points),1),t("td",null,l(r.source),1)]))),128))])])])):k("",!0),i.currentTab==="donations"?(u(),o("div",S,[t("table",null,[t("thead",null,[t("tr",null,[t("th",{onClick:e[4]||(e[4]=r=>s.sortBy("date"))},[e[18]||(e[18]=b(" 日期 ")),t("i",{class:a(s.getSortIcon("date"))},null,2)]),e[19]||(e[19]=t("th",null,"捐款方式",-1)),e[20]||(e[20]=t("th",null,"捐款抬頭",-1)),e[21]||(e[21]=t("th",null,"方案金額",-1)),e[22]||(e[22]=t("th",null,"收據編號",-1)),e[23]||(e[23]=t("th",null,"備註",-1))])]),t("tbody",null,[(u(!0),o(g,null,y(s.paginatedRecords,(r,d)=>(u(),o("tr",{key:d},[t("td",null,l(r.date),1),t("td",null,l(r.method),1),t("td",null,l(r.name),1),t("td",null,l(r.amount),1),t("td",null,l(r.receipt),1),t("td",null,l(r.note),1)]))),128))])])])):k("",!0),t("div",T,[t("button",{onClick:e[5]||(e[5]=r=>s.changePage(i.currentPage-1)),disabled:i.currentPage===1},"<",8,B),(u(!0),o(g,null,y(s.totalPages,r=>(u(),o("button",{key:r,onClick:d=>s.changePage(r),class:a({active:i.currentPage===r})},l(r),11,c))),128)),t("button",{onClick:e[6]||(e[6]=r=>s.changePage(i.currentPage+1)),disabled:i.currentPage===s.totalPages},">",8,K)])])}const V=f(P,[["render",O]]);export{V as default};
